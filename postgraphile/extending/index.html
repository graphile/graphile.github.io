<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NNK4X8M');</script><script src="https://use.fontawesome.com/c72bfae6f9.js"></script><link rel="preload" href="/component---src-layouts-index-js-53c26317295bc637138f.js" as="script"/><link rel="preload" href="/component---src-templates-page-js-47ad1cc6d98dad93e89c.js" as="script"/><link rel="preload" href="/path---postgraphile-extending-3533d6ec3e6c383dd103.js" as="script"/><link rel="preload" href="/app-eb265f0928a0eddb517e.js" as="script"/><link rel="preload" href="/commons-3596aa1ab404ed60101f.js" as="script"/><title data-react-helmet="true">PostGraphile | GraphQL Schema Plugins</title><meta data-react-helmet="true" name="description" content="Utilities to build powerful and performant GraphQL APIs"/><meta data-react-helmet="true" name="keywords" content="GraphQL, API, Graph, PostgreSQL, PostGraphile, PostGraphQL, Postgres-GraphQL, server, plugins, introspection, reflection"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><link rel="stylesheet" href="/styles.css?t=2018-08-30T08-14-24.119Z"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNK4X8M" height="0" width="0" style="display:none;visibility:hidden;"></iframe></noscript><div id="___gatsby"><div tabindex="-1" data-reactroot="" data-reactid="1" data-react-checksum="-1497821961"><div class="template-page postgraphile" data-reactid="2"><!-- react-empty: 3 --><header class="header content absolute z-999 w-100" data-reactid="4"><nav class="navbar" data-reactid="5"><div class="container" data-reactid="6"><input type="checkbox" class="navbar-toggler input-reset" id="toggle" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" data-reactid="7"/><div class="nav-controls nested-list-reset " data-reactid="8"><div class="navbar-crosses" data-reactid="9"><span class="line line-1" data-reactid="10"> </span><span class="line line-2" data-reactid="11"> </span><span class="line line-3" data-reactid="12"> </span></div><ul class="navbar-nav flex w-100" data-reactid="13"><li class="navbar-item" data-reactid="14"><a class="nav-link " href="/" data-reactid="15"><span class="home-icon fa fa-home" data-reactid="16"></span><!-- react-text: 17 --> <!-- /react-text --><span class="home" data-reactid="18">Home</span></a></li><!-- react-empty: 19 --><!-- react-empty: 20 --><!-- react-empty: 21 --><li class="navbar-item" data-reactid="22"><a class="nav-link " href="/postgraphile/" data-reactid="23">Overview</a></li><li class="navbar-item" data-reactid="24"><a class="nav-link active" href="/postgraphile/introduction/" data-reactid="25">Documentation</a></li><li class="navbar-item" data-reactid="26"><a class="nav-link " href="/postgraphile/pricing/" data-reactid="27">Go Pro!</a></li><!-- react-empty: 28 --><!-- react-empty: 29 --><!-- react-empty: 30 --><li class="navbar-item ml-auto navbar-item-right" data-reactid="31"><span class="searchbox-container" data-reactid="32"><input id="search-box" placeholder="Search" data-reactid="33"/><span class="fa fa-search searchbox-search" data-reactid="34"></span></span></li><li class="navbar-item navbar-item-right" data-reactid="35"><a class="nav-link " href="/support/" data-reactid="36">Services</a></li><li class="navbar-item navbar-item-right hide-when-small" data-reactid="37"><a class="nav-link" href="https://graphql-training.com" title="GraphQL Training in London, Europe and Remote" data-reactid="38"><!-- react-text: 39 -->GraphQL Training<!-- /react-text --><!-- react-text: 40 --> <!-- /react-text --><span class="fa fa-external-link-square" data-reactid="41"></span></a></li><li class="navbar-item navbar-item-right" data-reactid="42"><a class="nav-link nav-github-link flex items-center" href="https://github.com/graphile/postgraphile" data-reactid="43"><span class="f3 fa fa-github" data-reactid="44"></span><!-- react-text: 45 --> <!-- /react-text --><span class="github" data-reactid="46"><!-- react-text: 47 -->Github <!-- /react-text --><span class="fa fa-external-link-square" data-reactid="48"></span></span></a></li></ul></div></div></nav></header><div class="page-content" data-reactid="49"><section data-reactid="50"><div class="container" data-reactid="51"><div class="row between-xs" data-reactid="52"><aside class="sidebar col-xs-12 col-md-3 last-xs mt3" data-reactid="53"><section data-reactid="54"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="55"><span data-reactid="56">Overview</span></h4><div class="nested-list-reset" data-reactid="57"><ul class="page-list nav flex-column mb5" data-reactid="58"><li class="f6 lh-copy pv1" data-reactid="59"><a class="nav-link " href="/postgraphile/introduction/" data-reactid="60"><span data-reactid="61">Introduction</span></a></li><li class="f6 lh-copy pv1" data-reactid="62"><a class="nav-link " href="/postgraphile/examples/" data-reactid="63"><span data-reactid="64">Examples</span></a></li><li class="f6 lh-copy pv1" data-reactid="65"><a class="nav-link " href="/postgraphile/quick-start-guide/" data-reactid="66"><span data-reactid="67">Quick Start Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="68"><a class="nav-link " href="/postgraphile/requirements/" data-reactid="69"><span data-reactid="70">Requirements</span></a></li><li class="f6 lh-copy pv1" data-reactid="71"><a class="nav-link " href="/postgraphile/performance/" data-reactid="72"><span data-reactid="73">Performance</span></a></li><li class="f6 lh-copy pv1" data-reactid="74"><a class="nav-link " href="/postgraphile/connections/" data-reactid="75"><span data-reactid="76">Connections</span></a></li><li class="f6 lh-copy pv1" data-reactid="77"><a class="nav-link " href="/postgraphile/filtering/" data-reactid="78"><span data-reactid="79">Filtering</span></a></li><li class="f6 lh-copy pv1" data-reactid="80"><a class="nav-link " href="/postgraphile/relations/" data-reactid="81"><span data-reactid="82">Relations</span></a></li><li class="f6 lh-copy pv1" data-reactid="83"><a class="nav-link " href="/postgraphile/crud-mutations/" data-reactid="84"><span data-reactid="85">CRUD Mutations</span></a></li><li class="f6 lh-copy pv1" data-reactid="86"><a class="nav-link " href="/postgraphile/computed-columns/" data-reactid="87"><span data-reactid="88">Computed Columns</span></a></li><li class="f6 lh-copy pv1" data-reactid="89"><a class="nav-link " href="/postgraphile/custom-queries/" data-reactid="90"><span data-reactid="91">Custom Queries</span></a></li><li class="f6 lh-copy pv1" data-reactid="92"><a class="nav-link " href="/postgraphile/custom-mutations/" data-reactid="93"><span data-reactid="94">Custom Mutations</span></a></li><li class="f6 lh-copy pv1" data-reactid="95"><a class="nav-link " href="/postgraphile/smart-comments/" data-reactid="96"><span data-reactid="97">Smart Comments</span></a></li><li class="f6 lh-copy pv1" data-reactid="98"><a class="nav-link " href="/postgraphile/security/" data-reactid="99"><span data-reactid="100">Security</span></a></li><li class="f6 lh-copy pv1" data-reactid="101"><a class="nav-link " href="/postgraphile/introspection/" data-reactid="102"><span data-reactid="103">Introspection</span></a></li><li class="f6 lh-copy pv1" data-reactid="104"><a class="nav-link active" href="/postgraphile/extending/" data-reactid="105"><span data-reactid="106">Schema Plugins</span></a></li><li class="f6 lh-copy pv1" data-reactid="107"><a class="nav-link " href="/postgraphile/plugins/" data-reactid="108"><span data-reactid="109">Server Plugins</span></a></li><li class="f6 lh-copy pv1" data-reactid="110"><a class="nav-link " href="/postgraphile/subscriptions/" data-reactid="111"><span data-reactid="112">Subscriptions</span></a></li><li class="f6 lh-copy pv1" data-reactid="113"><a class="nav-link " href="/postgraphile/production/" data-reactid="114"><span data-reactid="115">Production Considerations</span></a></li><li class="f6 lh-copy pv1" data-reactid="116"><a class="nav-link " href="/postgraphile/reserved-keywords/" data-reactid="117"><span data-reactid="118">Reserved Keywords</span></a></li><li class="f6 lh-copy pv1" data-reactid="119"><a class="nav-link " href="/postgraphile/debugging/" data-reactid="120"><span data-reactid="121">Debugging</span></a></li></ul></div></section><section data-reactid="122"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="123"><span data-reactid="124">Guides</span></h4><div class="nested-list-reset" data-reactid="125"><ul class="page-list nav flex-column mb5" data-reactid="126"><li class="f6 lh-copy pv1" data-reactid="127"><a class="nav-link " href="/postgraphile/evaluating/" data-reactid="128"><span data-reactid="129">Evaluating for your Project</span></a></li><li class="f6 lh-copy pv1" data-reactid="130"><a class="nav-link " href="/postgraphile/jwt-guide/" data-reactid="131"><span data-reactid="132">PostGraphile JWT Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="133"><a class="nav-link " href="/postgraphile/default-role/" data-reactid="134"><span data-reactid="135">The Default Role</span></a></li><li class="f6 lh-copy pv1" data-reactid="136"><a class="nav-link " href="/postgraphile/procedures/" data-reactid="137"><span data-reactid="138">PostgreSQL Procedures</span></a></li><li class="f6 lh-copy pv1" data-reactid="139"><a class="nav-link " href="/postgraphile/postgresql-schema-design/" data-reactid="140"><span data-reactid="141">PostgreSQL Schema Design</span></a></li><li class="f6 lh-copy pv1" data-reactid="142"><a class="nav-link " href="/postgraphile/postgresql-indexes/" data-reactid="143"><span data-reactid="144">PostgreSQL Indexes</span></a></li><li class="f6 lh-copy pv1" data-reactid="145"><a class="nav-link " href="/postgraphile/v4-new-features/" data-reactid="146"><span data-reactid="147">v4 Feature Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="148"><a class="nav-link " href="/postgraphile/v3-migration/" data-reactid="149"><span data-reactid="150">v3 ‚Üí v4 Migration Guide</span></a></li></ul></div></section><section data-reactid="151"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="152"><span data-reactid="153">Usage</span></h4><div class="nested-list-reset" data-reactid="154"><ul class="page-list nav flex-column mb5" data-reactid="155"><li class="f6 lh-copy pv1" data-reactid="156"><a class="nav-link " href="/postgraphile/usage-cli/" data-reactid="157"><span data-reactid="158">CLI Usage</span></a></li><li class="f6 lh-copy pv1" data-reactid="159"><a class="nav-link " href="/postgraphile/usage-library/" data-reactid="160"><span data-reactid="161">Library Usage</span></a></li><li class="f6 lh-copy pv1" data-reactid="162"><a class="nav-link " href="/postgraphile/usage-schema/" data-reactid="163"><span data-reactid="164">Schema-only Usage</span></a></li></ul></div></section><section data-reactid="165"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="166"><span data-reactid="167">Community</span></h4><div class="nested-list-reset" data-reactid="168"><ul class="page-list nav flex-column mb5" data-reactid="169"><li class="f6 lh-copy pv1" data-reactid="170"><a class="nav-link " href="/postgraphile/community-plugins/" data-reactid="171"><span data-reactid="172">Community Plugins</span></a></li><li class="f6 lh-copy pv1" data-reactid="173"><a class="nav-link " href="/postgraphile/community-chat/" data-reactid="174"><span data-reactid="175">Community Chat</span></a></li><li class="f6 lh-copy pv1" data-reactid="176"><a class="nav-link " href="/postgraphile/code-of-conduct/" data-reactid="177"><span data-reactid="178">Code of Conduct</span></a></li></ul></div></section><section data-reactid="179"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="180"><span data-reactid="181">FAQ</span></h4><div class="nested-list-reset" data-reactid="182"><ul class="page-list nav flex-column mb5" data-reactid="183"><li class="f6 lh-copy pv1" data-reactid="184"><a class="nav-link " href="/postgraphile/why-nullable/" data-reactid="185"><span data-reactid="186">Why is it nullable?</span></a></li></ul></div></section></aside><div class="col-xs-12 col-md-9 first-xs main-content" data-reactid="187"><div class="row" data-reactid="188"><div class="col-xs-12" style="width:100%;" data-reactid="189"><div class="edit-this-page" data-reactid="190"><a href="https://github.com/graphile/graphile.github.io/edit/develop/src/pages/postgraphile/extending.md" data-reactid="191">üìù Edit this page</a></div><div data-reactid="192"><h2 id="graphql-schema-plugins"><a href="#graphql-schema-plugins" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GraphQL Schema Plugins</h2>
<p><em>NOTE: This page relates to changing your GraphQL schema. If you're instead looking to change how the web layer of PostGraphile works (e.g. for validating web requests), see <a href="/postgraphile/plugins/">Server Plugins</a>.</em></p>
<p><em>NOTE: if you're looking for an easy way to remove/rename things, check out <a href="/postgraphile/smart-comments/">smart comments</a>.</em></p>
<p>PostGraphile's schema generator is built from a number of <a href="/graphile-build/plugins/">Graphile Build
plugins</a>. You can write your own plugins (see below),
but we also make some helpers available in <code class="language-text">graphile-utils</code> that help you to
do common tasks.</p>
<h3 id="the-easy-way-graphile-utils"><a href="#the-easy-way-graphile-utils" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The easy way: <code class="language-text">graphile-utils</code></h3>
<p>The <code class="language-text">graphile-utils</code> module contains some helpers for extending your
PostGraphile (or Graphile Build) GraphQL schema without having to understand
the complex plugin system.</p>
<p>The main one you'll care about to start with is <code class="language-text">makeExtendSchemaPlugin</code>.</p>
<h4 id="makeextendschemaplugin"><a href="#makeextendschemaplugin" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>makeExtendSchemaPlugin</h4>
<p>Using makeExtendSchemaPlugin you can write a plugin that will merge additional
GraphQL types and resolvers into your schema using a similar syntax to
<code class="language-text">graphql-tools</code>. You just need to provide the <code class="language-text">typeDefs</code> and <code class="language-text">resolvers</code> to
use. Your plugin will likely take a shape like this:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span>
  makeExtendSchemaPlugin<span class="token punctuation">,</span>
  gql<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'graphile-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> MySchemaExtensionPlugin <span class="token operator">=</span>
  <span class="token function">makeExtendSchemaPlugin</span><span class="token punctuation">(</span>
    build <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      typeDefs<span class="token punctuation">:</span> gql<span class="token template-string"><span class="token string">`...`</span></span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">      resolvers<span class="token punctuation">:</span> <span class="token operator">...</span>
</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MySchemaExtensionPlugin<span class="token punctuation">;</span></code></pre>
      </div>
<p>And would be added to your PostGraphile instance via</p>
<ul>
<li>CLI: <code class="language-text">--append-plugins `pwd`/MySchemaExtensionPlugin.js</code></li>
<li>Library: <code class="language-text">appendPlugins: [require(&#39;./MySchemaExtensionPlugin&#39;)]</code></li>
</ul>
<p>The <code class="language-text">build</code> argument to the makeExtendSchemaPlugin callback contains lots of
information and helpers defined by various plugins, most importantly it
includes the introspection results (<code class="language-text">build.pgIntrospectionResultsByKind</code>),
inflection functions (<code class="language-text">build.inflection</code>), and SQL helper (<code class="language-text">build.pgSql</code>, which
is just an instance of <a href="https://www.npmjs.com/package/pg-sql2">pg-sql2</a>).</p>
<p>The callback should return an object with two keys:</p>
<ul>
<li><code class="language-text">typeDefs</code>: a graphql AST generated with the <code class="language-text">gql</code> helper from
<code class="language-text">graphile-utils</code> (note this is NOT from the <code class="language-text">graphql-tag</code> library, ours works
in a slightly different way).</li>
<li><code class="language-text">resolvers</code>: an object that's keyed by the GraphQL type names of types
defined (or extended) in <code class="language-text">typeDefs</code>, the values of which are objects keyed by
the field names with values that are resolver functions.</li>
</ul>
<p>For a larger example of how typeDefs and resolvers work, have a look at the
<a href="https://www.apollographql.com/docs/graphql-tools/generate-schema.html">graphql-tools
docs</a> -
ours work in a similar way.</p>
<p>Note that the resolve functions defined in <code class="language-text">resolvers</code> will be sent the
standard 4 GraphQL resolve arguments (<code class="language-text">parent</code>, <code class="language-text">args</code>, <code class="language-text">context</code>,
<code class="language-text">resolveInfo</code>); but in addition they will be passed a 5th argument that
contains graphile-specific helpers.</p>
<h5 id="the-selectgraphqlresultfromtable-helper"><a href="#the-selectgraphqlresultfromtable-helper" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code class="language-text">selectGraphQLResultFromTable</code> helper</h5>
<p>The <code class="language-text">selectGraphQLResultFromTable</code> function is vital if you want to return data
from the database from your new GraphQL field. It is responsible for hooking into
the query look-ahead features of <code class="language-text">graphile-build</code> to inspect the incoming GraphQL
query and pull down the relevant data from the database
(including nested relations). You are then expected to return the result of this
fetch via your resolver. You can use the <code class="language-text">sqlBuilder</code> object to customise the
generated query, changing the order, adding <code class="language-text">where</code> clauses, <code class="language-text">limit</code>s, etc.
Note that if you do not wish to return the data directly, you can use the
<code class="language-text">@recurseDataGenerators</code> directive on the intermediary field, see the example
below.</p>
<p>The <code class="language-text">sqlBuilder</code> uses an SQL AST constructed via
<a href="https://github.com/graphile/pg-sql2/blob/master/README.md"><code class="language-text">pg-sql2</code> methods</a>
to dynamically create powerful SQL queries without risking SQL injection
attacks. The <code class="language-text">sqlBuilder</code> has a number of methods which affect the query which
will be generated. The main ones you're likely to want are:</p>
<ul>
<li><code class="language-text">where(sqlFragment)</code>; e.g. <code class="language-text">sqlBuilder.where(build.pgSql.fragment`is_admin is true`)</code></li>
<li><code class="language-text">orderBy(() =&gt; sqlFragment, ascending)</code>; e.g. <code class="language-text">sqlBuilder.orderBy(() =&gt; build.pgSql.fragment`created_at`, false)</code></li>
<li><code class="language-text">limit(number)</code>; e.g. <code class="language-text">sqlBuilder.limit(1)</code></li>
<li><code class="language-text">offset(number)</code>; e.g. <code class="language-text">sqlBuilder.offset(1)</code></li>
<li><code class="language-text">select(() =&gt; sqlFragment, alias)</code>; e.g. <code class="language-text">sqlBuilder.select(() =&gt; build.pgSql.fragment`gen_random_uuid()`, &#39;__my_random_uuid&#39;)</code> - it's advised to start your alias with two underscores to prevent it clashing with any potential columns exposed as GraphQL fields.</li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> postgraphile <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"postgraphile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> makeExtendSchemaPlugin<span class="token punctuation">,</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"graphile-utils"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"express"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> MyRandomUserPlugin <span class="token operator">=</span> <span class="token function">makeExtendSchemaPlugin</span><span class="token punctuation">(</span>build <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> pgSql<span class="token punctuation">:</span> sql <span class="token punctuation">}</span> <span class="token operator">=</span> build<span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">    typeDefs<span class="token punctuation">:</span> gql<span class="token template-string"><span class="token string">`
</span><span class="gatsby-highlight-code-line">      extend type Query {
</span><span class="gatsby-highlight-code-line">        randomUser: User
</span><span class="gatsby-highlight-code-line">      }
</span><span class="gatsby-highlight-code-line">    `</span></span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">    resolvers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">      Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">        randomUser<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">          _query<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          args<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          context<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          resolveInfo<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          <span class="token punctuation">{</span> selectGraphQLResultFromTable <span class="token punctuation">}</span>
</span><span class="gatsby-highlight-code-line">        <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">          <span class="token comment">// Remember: selectGraphQLResultFromTable is where the PostGraphile</span>
</span><span class="gatsby-highlight-code-line">          <span class="token comment">// look-ahead magic happens!</span>
</span><span class="gatsby-highlight-code-line">          <span class="token keyword">const</span> rows <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">selectGraphQLResultFromTable</span><span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">            sql<span class="token punctuation">.</span>fragment<span class="token template-string"><span class="token string">`app_public.users`</span></span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">            <span class="token punctuation">(</span>tableAlias<span class="token punctuation">,</span> sqlBuilder<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">              sqlBuilder<span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span>sql<span class="token punctuation">.</span>fragment<span class="token template-string"><span class="token string">`random()`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">              sqlBuilder<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">            <span class="token punctuation">}</span>
</span><span class="gatsby-highlight-code-line">          <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">          <span class="token keyword">return</span> rows<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">postgraphile</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_URL</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"app_public"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    graphiql<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    appendPlugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>MyRandomUserPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3030</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>The above is a simple and fairly pointless example which would have been better
served by a <a href="/postgraphile/custom-queries/#custom-query-sql-procedures">Custom Query SQL
Procedure</a>; however
you can also use this system to define mutations or to call out to external
services. For example, you might want to add a custom <code class="language-text">registerUser</code> mutation
which inserts the new user into the database and also sends them an email:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> MyRegisterUserMutationPlugin <span class="token operator">=</span>
<span class="token function">makeExtendSchemaPlugin</span><span class="token punctuation">(</span>build <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pgSql<span class="token punctuation">:</span> sql <span class="token punctuation">}</span> <span class="token operator">=</span> build<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    typeDefs<span class="token punctuation">:</span> gql<span class="token template-string"><span class="token string">`
      input RegisterUserInput {
        name: String!
        email: String!
        bio: String
      }

      type RegisterUserPayload {
        user: User @recurseDataGenerators
        query: Query
      }

<span class="gatsby-highlight-code-line">      extend type Mutation {
</span>        registerUser(input: RegisterUserInput!):
          RegisterUserPayload
      }
    `</span></span><span class="token punctuation">,</span>
    resolvers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">        registerUser<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">          _query<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          args<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          context<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          resolveInfo<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          <span class="token punctuation">{</span> selectGraphQLResultFromTable <span class="token punctuation">}</span>
</span><span class="gatsby-highlight-code-line">        <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">          <span class="token keyword">const</span> <span class="token punctuation">{</span> pgClient <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">          <span class="token comment">// Start a sub-transaction</span>
</span><span class="gatsby-highlight-code-line">          <span class="token keyword">await</span> pgClient<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"SAVEPOINT graphql_mutation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">          <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// Our custom logic to register the user:</span>
</span><span class="gatsby-highlight-code-line">            <span class="token keyword">const</span> <span class="token punctuation">{</span> rows<span class="token punctuation">:</span> <span class="token punctuation">[</span>user<span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> pgClient<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">              <span class="token template-string"><span class="token string">`INSERT INTO app_public.users(
</span><span class="gatsby-highlight-code-line">                name, email, bio
</span><span class="gatsby-highlight-code-line">              ) VALUES ($1, $2, $3)
</span><span class="gatsby-highlight-code-line">              RETURNING *`</span></span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">              <span class="token punctuation">[</span>
</span><span class="gatsby-highlight-code-line">                args<span class="token punctuation">.</span>input<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">                args<span class="token punctuation">.</span>input<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">                args<span class="token punctuation">.</span>input<span class="token punctuation">.</span>bio<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">              <span class="token punctuation">]</span>
</span><span class="gatsby-highlight-code-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// Now we fetch the result that the GraphQL</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// client requested, using the new user</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// account as the source of the data. You</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// should always use</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// `selectGraphQLResultFromTable` if you</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// return database data from your custom</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// field.</span>
</span><span class="gatsby-highlight-code-line">            <span class="token keyword">const</span> <span class="token punctuation">[</span>row<span class="token punctuation">]</span> <span class="token operator">=</span>
</span><span class="gatsby-highlight-code-line">              <span class="token keyword">await</span> <span class="token function">selectGraphQLResultFromTable</span><span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">                sql<span class="token punctuation">.</span>fragment<span class="token template-string"><span class="token string">`app_public.users`</span></span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">                <span class="token punctuation">(</span>tableAlias<span class="token punctuation">,</span> sqlBuilder<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">                  sqlBuilder<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">                    sql<span class="token punctuation">.</span>fragment<span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tableAlias<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.id = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
</span><span class="gatsby-highlight-code-line">                      sql<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
</span><span class="gatsby-highlight-code-line">                    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
</span><span class="gatsby-highlight-code-line">                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">                <span class="token punctuation">}</span>
</span><span class="gatsby-highlight-code-line">              <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// Finally we send the email. If this</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// fails then we'll catch the error</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// and roll back the transaction, and</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// it will be as if the user never</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// registered</span>
</span><span class="gatsby-highlight-code-line">            <span class="token keyword">await</span> <span class="token function">mockSendEmail</span><span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">              args<span class="token punctuation">.</span>input<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">              <span class="token string">"Welcome to my site"</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">              <span class="token template-string"><span class="token string">`You're user </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - `</span></span> <span class="token operator">+</span>
</span><span class="gatsby-highlight-code-line">                <span class="token template-string"><span class="token string">`thanks for being awesome`</span></span>
</span><span class="gatsby-highlight-code-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// Success! Write the user to the database.</span>
</span><span class="gatsby-highlight-code-line">            <span class="token keyword">await</span> pgClient<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"RELEASE SAVEPOINT graphql_mutation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// We pass the fetched result via the</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// `user` field to match the</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// @recurseDataGenerators directive</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// used above. GraphQL mutation</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// payloads typically have additional</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">// fields.</span>
</span><span class="gatsby-highlight-code-line">            <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">              user<span class="token punctuation">:</span> row<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">              query<span class="token punctuation">:</span> build<span class="token punctuation">.</span>$$isQuery<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">            <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span>          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Oh noes! If at first you don't succeed,</span>
            <span class="token comment">// destroy all evidence you ever tried.</span>
            <span class="token keyword">await</span> pgClient<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"ROLLBACK TO SAVEPOINT graphql_mutation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>Note that the <code class="language-text">@recurseDataGenerators</code> directive here tells PostGraphile to act
as if the RegisterUserPayload didn't exist and instead the <code class="language-text">user</code> field was
returned by the mutation directly. This is because we often add other fields to
mutation payloads, such as <code class="language-text">query</code> for the root Query type.</p>
<h3 id="loading-additional-plugins"><a href="#loading-additional-plugins" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loading additional plugins</h3>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token comment"># For a local file:</span>
postgraphile \
  --append-plugins <span class="token variable"><span class="token variable">`</span><span class="token function">pwd</span><span class="token variable">`</span></span>/add-http-bin-plugin.js \
  -c postgres://localhost/mydb

<span class="token comment"># Or, for an npm plugin:</span>
postgraphile \
  --append-plugins postgraphile-plugin-connection-filter \
  -c postgres://localhost/mydb</code></pre>
      </div>
<p>If you're using the CLI you can use option <code class="language-text">--append-plugins</code> to load additional
plugins. You specify a comma separated list of module specs. A module spec is
a path to a JS file to load, optionally followed by a colon and the name of the
export (you must omit this if the function is exported via
<code class="language-text">module.exports = function MyPlugin(...){...}</code>). E.g.</p>
<ul>
<li><code class="language-text">--append-plugins my-npm-module</code> (requires <code class="language-text">module.exports = function NpmPlugin(...) {...}</code>)</li>
<li><code class="language-text">--append-plugins /path/to/local/module.js:MyPlugin</code> (requires <code class="language-text">exports.MyPlugin = function MyPlugin(...) {...}</code>)</li>
</ul>
<p>If you're using postgraphile as a library you can instead use the appendPlugins
option which is simply an array of functions (<em>you perform your own requiring</em>!)</p>
<p>Remember: multiple versions of graphql in your <code class="language-text">node_modules</code> will cause
problems; so we recommend using the <code class="language-text">graphql</code> object that's available on the
<code class="language-text">Build</code> object (second argument to hooks).</p>
<h3 id="writing-your-own-plugins"><a href="#writing-your-own-plugins" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing your own plugins</h3>
<p>The core PG-related plugins can be found here:</p>
<p><a href="https://github.com/graphile/graphile-build/tree/master/packages/graphile-build-pg/src/plugins">https://github.com/graphile/graphile-build/tree/master/packages/graphile-build-pg/src/plugins</a></p>
<p>These plugins introduce small amounts of functionality, and build upon each
other. The order in which the plugins are loaded is significant, and can be
found from the <code class="language-text">defaultPlugins</code> export in
<a href="https://github.com/graphile/graphile-build/blob/master/packages/graphile-build-pg/src/index.js"><code class="language-text">src/index.js</code></a>
of the <code class="language-text">graphile-build-pg</code> module.</p>
<p>You can extend PostGraphile's GraphQL schema by adding plugins before or after
the default plugins. You may even opt to replace the entire list of plugins
used to build the schema. Graphile Build plugins are built on top of the
<a href="http://graphql.org/graphql-js/">GraphQL reference JS implementation</a>, so it is
recommended that you have familiarity with that before attempting to write your
own plugins.</p>
<h3 id="adding-root-querymutation-fields"><a href="#adding-root-querymutation-fields" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding root query/mutation fields</h3>
<p>A common request is to add additional root-level fields to your schema, for
example to integrate external services. To do this we must add a
'GraphQLObjectType:fields' hook and then add our new field:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// add-http-bin-plugin.js</span>
<span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"node-fetch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">AddHttpBinPlugin</span><span class="token punctuation">(</span>builder<span class="token punctuation">,</span> <span class="token punctuation">{</span> pgExtendedTypes <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  builder<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">"GraphQLObjectType:fields"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>
    fields<span class="token punctuation">,</span> <span class="token comment">// Input object - the fields for this GraphQLObjectType</span>
    <span class="token punctuation">{</span> extend<span class="token punctuation">,</span> getTypeByName <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Build object - handy utils</span>
    <span class="token punctuation">{</span> scope<span class="token punctuation">:</span> <span class="token punctuation">{</span> isRootQuery <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token comment">// Context object - used for filtering</span>
  <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRootQuery<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// This isn't the object we want to modify:</span>
      <span class="token comment">// return the input object unmodified</span>
      <span class="token keyword">return</span> fields<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// We don't want to introduce a new JSON type as that will clash,</span>
    <span class="token comment">// so let's find the JSON type that other fields use:</span>
    <span class="token keyword">const</span> JSONType <span class="token operator">=</span> <span class="token function">getTypeByName</span><span class="token punctuation">(</span><span class="token string">"JSON"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">extend</span><span class="token punctuation">(</span>fields<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      httpBinHeaders<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> JSONType<span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://httpbin.org/headers"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>pgExtendedTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// This setting is enabled through postgraphile's</span>
            <span class="token comment">// `--dynamic-json` option, if enabled return JSON:</span>
            <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// If Dynamic JSON is not enabled, we want a JSON string instead</span>
            <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> AddHttpBinPlugin<span class="token punctuation">;</span></code></pre>
      </div>
<p>(If you wanted to add a mutation you'd use <code class="language-text">isRootMutation</code> rather than <code class="language-text">isRootQuery</code>.)</p>
<p>We can then load our plugin into PostGraphile via:</p>
<div class="gatsby-highlight">
      <pre class="language-text"><code class="language-text">postgraphile --append-plugins `pwd`/add-http-bin-plugin.js -c postgres://localhost/mydb</code></pre>
      </div>
<p>Note that the return types of added fields (e.g. <code class="language-text">JSONType</code> above) do not need
to be implemented via Graphile Build's
<a href="/graphile-build/build-object/#newwithhookstype-spec-scope"><code class="language-text">newWithHooks</code></a> -
you can use standard GraphQL objects too. (However, if you do not use
<code class="language-text">newWithHooks</code> then the objects referenced cannot be extended via plugins.)</p>
<h3 id="wrapping-an-existing-resolver"><a href="#wrapping-an-existing-resolver" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wrapping an existing resolver</h3>
<p>Sometimes you might want to override what an existing field does. Due to the
way that PostGraphile works (where the root Query field resolvers are the only
ones who perform SQL queries) this is generally most useful at the top level.</p>
<p>The following example modifies the 'createLink' mutation so that it performs
some additional validation (thrown an error if the link's <code class="language-text">title</code> is too short)
and performs an action after the link has been saved. You could use a plugin
like this to achieve many different tasks, including emailing a user after
their account is created or logging failed authentication attempts.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">performAnotherTask</span><span class="token punctuation">(</span>linkId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`We created link </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linkId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">CreateLinkWrapPlugin</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  builder<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span>
    <span class="token string">"GraphQLObjectType:fields:field"</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>
      field<span class="token punctuation">,</span>
      <span class="token punctuation">{</span> pgSql<span class="token punctuation">:</span> sql <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> scope<span class="token punctuation">:</span> <span class="token punctuation">{</span> isRootMutation<span class="token punctuation">,</span> fieldName <span class="token punctuation">}</span><span class="token punctuation">,</span> addArgDataGenerator <span class="token punctuation">}</span>
    <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRootMutation <span class="token operator">||</span> fieldName <span class="token operator">!==</span> <span class="token string">"createLink"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If it's not the root mutation, or the mutation isn't the 'createLink'</span>
        <span class="token comment">// mutation then we don't want to modify it - so return the input object</span>
        <span class="token comment">// unmodified.</span>
        <span class="token keyword">return</span> field<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// We're going to need link.id for our `performAnotherTask`; so we're going</span>
      <span class="token comment">// to abuse addArgDataGenerator to make sure that this field is ALWAYS</span>
      <span class="token comment">// requested, even if the user doesn't specify it. We're careful to alias</span>
      <span class="token comment">// the result to a field that begins with `__` as that's forbidden by</span>
      <span class="token comment">// GraphQL and thus cannot clash with a user's fields.</span>
      <span class="token function">addArgDataGenerator</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        pgQuery<span class="token punctuation">:</span> queryBuilder <span class="token operator">=></span> <span class="token punctuation">{</span>
          queryBuilder<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>
            <span class="token comment">// Select this value from the result of the INSERT:</span>
            sql<span class="token punctuation">.</span>query<span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>queryBuilder<span class="token punctuation">.</span><span class="token function">getTableAlias</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.id`</span></span><span class="token punctuation">,</span>
            <span class="token comment">// And give it this name in the result data:</span>
            <span class="token string">"__createdRecordId"</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// It's possible that `resolve` isn't specified on a field, so in that case</span>
      <span class="token comment">// we fall back to a default resolver.</span>
      <span class="token keyword">const</span> <span class="token function-variable function">defaultResolver</span> <span class="token operator">=</span> obj <span class="token operator">=></span> obj<span class="token punctuation">[</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token comment">// Extract the old resolver from `field`</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> resolve<span class="token punctuation">:</span> oldResolve <span class="token operator">=</span> defaultResolver<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span> <span class="token operator">=</span> field<span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// Copy over everything except 'resolve'</span>
        <span class="token operator">...</span>rest<span class="token punctuation">,</span>

        <span class="token comment">// Add our new resolver which wraps the old resolver</span>
        <span class="token keyword">async</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token operator">...</span>resolveParams<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// Perform some validation (or any other action you want to do before</span>
          <span class="token comment">// calling the old resolver)</span>
          <span class="token keyword">const</span> <span class="token constant">RESOLVE_ARGS_INDEX</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> input<span class="token punctuation">:</span> <span class="token punctuation">{</span> link<span class="token punctuation">:</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> resolveParams<span class="token punctuation">[</span>
            <span class="token constant">RESOLVE_ARGS_INDEX</span>
          <span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>title<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Title is too short!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token comment">// Call the old resolver (you SHOULD NOT modify the arguments it</span>
          <span class="token comment">// receives unless you also manipulate the AST it gets passed as the</span>
          <span class="token comment">// 4th argument; which is quite a lot of effort) and store the result.</span>
          <span class="token keyword">const</span> oldResolveResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">oldResolve</span><span class="token punctuation">(</span><span class="token operator">...</span>resolveParams<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment">// Perform any tasks we want to do after the record is created.</span>
          <span class="token keyword">await</span> <span class="token function">performAnotherTask</span><span class="token punctuation">(</span>oldResolveResult<span class="token punctuation">.</span>data<span class="token punctuation">.</span>__createdRecordId<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment">// Finally return the result.</span>
          <span class="token keyword">return</span> oldResolveResult<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
      </div>
<h3 id="removing-things-from-the-schema"><a href="#removing-things-from-the-schema" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Removing things from the schema</h3>
<p><strong>If you're looking for an easy way to remove a few things, check out <a href="/postgraphile/smart-comments/">smart
comments</a>.</strong>
If you want to remove a class of things from the schema then you can remove
the plugin that adds them; for example if you no longer wanted to allow
ordering by all the columns of a table (i.e. only allow ordering by the primary
key) you could omit
<a href="https://github.com/graphile/graphile-build/blob/master/packages/graphile-build-pg/src/plugins/PgOrderAllColumnsPlugin.js">PgOrderAllColumnsPlugin</a>.
If you didn't want computed columns added you could omit
<a href="https://github.com/graphile/graphile-build/blob/master/packages/graphile-build-pg/src/plugins/PgComputedColumnsPlugin.js">PgComputedColumnsPlugin</a>.</p>
<p>However, sometimes you need more surgical precision, and you only want to
remove one specific type of thing. To achieve this you need to add a hook to the
thing that owns the thing you wish to remove - for example if you
want to remove a field <code class="language-text">bar</code> from an object type <code class="language-text">Foo</code> you could hook
<code class="language-text">GraphQLObjectType:fields</code> and return the set of fields less the one you want
removed.</p>
<p>Here's an example of a plugin generator you could use to generate plugins to
remove individual fields. This is just to demonstrate how a plugin to do this
might work, <a href="/postgraphile/smart-comments/">smart comments</a> are likely a better
approach.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> omit <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"lodash/omit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">removeFieldPluginGenerator</span><span class="token punctuation">(</span>objectName<span class="token punctuation">,</span> fieldName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    builder<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">"GraphQLObjectType:fields"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>fields<span class="token punctuation">,</span> _<span class="token punctuation">,</span> <span class="token punctuation">{</span> Self <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Self<span class="token punctuation">.</span>name <span class="token operator">!==</span> objectName<span class="token punctuation">)</span> <span class="token keyword">return</span> fields<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">omit</span><span class="token punctuation">(</span>fields<span class="token punctuation">,</span> <span class="token punctuation">[</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// For debugging:</span>
  fn<span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token template-string"><span class="token string">`RemoveFieldPlugin:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>objectName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fieldName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> fn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> RemoveFooDotBarPlugin <span class="token operator">=</span> <span class="token function">removeFieldPluginGenerator</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> RemoveFooDotBarPlugin<span class="token punctuation">;</span></code></pre>
      </div></div></div><br data-reactid="193"/><br data-reactid="194"/><div class="col-xs-12 mt3 mb5" data-reactid="195"><div class="row between-xs" data-reactid="196"><div class="col-xs-6" data-reactid="197"><a class="" href="/postgraphile/introspection/" data-reactid="198"><span class="fa fa-fw fa-long-arrow-left" data-reactid="199"></span><!-- react-text: 200 --> <!-- /react-text --><span data-reactid="201">Introspection</span></a></div><div class="col-xs-6 tr" data-reactid="202"><a class="" href="/postgraphile/plugins/" data-reactid="203"><span data-reactid="204">Server Plugins</span><!-- react-text: 205 --> <!-- /react-text --><span class="fa fa-fw fa-long-arrow-right" data-reactid="206"></span></a></div></div></div></div></div></div></div></section><section class="mailinglist" data-reactid="207"><div class="container" data-reactid="208"><div class="row" data-reactid="209"><div class="col-xs-12" data-reactid="210"><div class="hero-block" data-reactid="211"><h3 data-reactid="212"><!-- react-text: 213 -->Questions, comments or feedback?<!-- /react-text --><br data-reactid="214"/><!-- react-text: 215 -->Email<!-- /react-text --><!-- react-text: 216 --> <!-- /react-text --><a href="mailto:info@graphile.org?subject=Documentation%20question/comment/feedback:)" data-reactid="217">info@graphile.org</a></h3><form action="//graphile.us16.list-manage.com/subscribe/post?u=d103f710cf00a9273b55e8e9b&amp;id=c3a9eb5c4e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="218"><div id="mc_embed_signup_scroll" class="center hero-block" data-reactid="219"><p data-reactid="220">Keep up to date on Graphile and PostGraphile features/changes. Subscribe to our occasional announcements newsletter:</p><div class="mc-field-group form-inline justify-content-center" data-reactid="221"><div class="form-group" data-reactid="222"><div class="mb2" data-reactid="223"><label class="label--small" for="mce-EMAIL" data-reactid="224">Email address:</label></div><input type="email" autocapitalize="off" autocomplete="off" autocorrect="off" class="input-text mb0-ns mb1" id="mce-EMAIL" name="EMAIL" spellcheck="false" value="" data-reactid="225"/><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="226"><input type="text" name="b_d103f710cf00a9273b55e8e9b_c3a9eb5c4e" tabindex="-1" value="" data-reactid="227"/></div><input type="submit" class="button--solid" id="mc-embedded-subscribe" name="subscribe" value="Subscribe" data-reactid="228"/></div><div id="mce-responses" class="clear" data-reactid="229"><div class="response" id="mce-error-response" style="display:none;" data-reactid="230"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="231"></div></div></div></div></form></div></div></div></div></section></div><footer class="bg-white pv5 bt b--black f6 lh-copy" data-reactid="232"><div class="container" data-reactid="233"><div class="row" data-reactid="234"><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="235"><h6 data-reactid="236">PostGraphile</h6><ul data-reactid="237"><li data-reactid="238"><a href="/postgraphile/introduction/" data-reactid="239">Introduction</a></li><li data-reactid="240"><a href="/postgraphile/security/" data-reactid="241">Security</a></li><li data-reactid="242"><a href="/postgraphile/extending/" data-reactid="243">Extending</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="244"><h6 data-reactid="245">Graphile Build</h6><ul data-reactid="246"><li data-reactid="247"><a href="/graphile-build/" data-reactid="248">About</a></li><li data-reactid="249"><a href="/graphile-build/getting-started/" data-reactid="250">Getting Started</a></li><li data-reactid="251"><a href="/graphile-build/plugins/" data-reactid="252">Plugins</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset" data-reactid="253"><h6 data-reactid="254">Community</h6><ul data-reactid="255"><li data-reactid="256"><a href="https://github.com/graphile" data-reactid="257">GitHub</a></li><li data-reactid="258"><a href="https://gitter.im/graphile/postgraphile" data-reactid="259">Gitter chat</a></li><li data-reactid="260"><a href="https://twitter.com/benjie" data-reactid="261">Twitter</a></li></ul></div><div class="col-xs-12 col-md-offset-1 col-md-5" data-reactid="262"><h6 data-reactid="263">About</h6><!-- react-text: 264 -->PostGraphile and Graphile Build are Open Source Software, developed and maintained by <!-- /react-text --><a href="https://twitter.com/benjie" data-reactid="265">@Benjie</a><!-- react-text: 266 -->with the help of the community.<!-- /react-text --><br data-reactid="267"/><br data-reactid="268"/><!-- react-text: 269 -->You can support the projects via<!-- /react-text --><!-- react-text: 270 --> <!-- /react-text --><a href="https://www.patreon.com/benjie" target="_blank" data-reactid="271">Patreon</a><!-- react-text: 272 -->, by <!-- /react-text --><a href="/postgraphile/pricing/" data-reactid="273">going Pro</a><!-- react-text: 274 -->, or by paying for <!-- /react-text --><a href="/support/" data-reactid="275">Professional Services</a><!-- react-text: 276 -->. Your support is gratefully received üôè<!-- /react-text --><br data-reactid="277"/><br data-reactid="278"/><!-- react-text: 279 -->This site is copyright ¬© Benjie Gillam <!-- /react-text --><!-- react-text: 280 -->2018<!-- /react-text --><!-- react-text: 281 -->. Design and logos copyright ¬© Benjie Gillam and Jof Arnold<!-- /react-text --><!-- react-text: 282 --> <!-- /react-text --><!-- react-text: 283 -->2018<!-- /react-text --><!-- react-text: 284 -->.<!-- /react-text --><br data-reactid="285"/><br data-reactid="286"/><!-- react-text: 287 -->Corrections and contributions to this website are gratefully received via<!-- /react-text --><!-- react-text: 288 --> <!-- /react-text --><a href="https://github.com/graphile/graphile.github.io" data-reactid="289">its GitHub repository</a><!-- react-text: 290 -->.<!-- /react-text --><br data-reactid="291"/><br data-reactid="292"/><!-- react-text: 293 -->PostGraphile was <!-- /react-text --><a href="/history/" data-reactid="294">originally authored</a><!-- react-text: 295 --> as PostGraphQL by<!-- /react-text --><!-- react-text: 296 --> <!-- /react-text --><a href="https://twitter.com/calebmer" data-reactid="297">Caleb Meredith</a><!-- react-text: 298 -->.<!-- /react-text --></div></div></div></footer></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-eb265f0928a0eddb517e.js","266772403791747":"component---src-templates-home-js-408d6540d13e20da37b8.js","96961042003272":"component---src-templates-page-js-47ad1cc6d98dad93e89c.js","59784799166159":"component---src-templates-marketing-js-9f9607cc4787f4dfabcf.js","60335399758886":"path----557518bd178906f8d58a.js","142629428675168":"path---index-04361dfa1e873f59fc7b.js","192423053311925":"path---graphile-build-pg-security-b63aab82e305b024f6e0.js","45788430371641":"path---history-254639ae91205f9feae5.js","128602041518144":"path---graphile-build-all-hooks-d42ec0e183cd9df9acff.js","64023390553510":"path---graphile-build-build-object-3c5b7ac1d0350f3fa6cb.js","133858743292129":"path---postgraphile-settings-e46c642d9b9122d392de.js","69504633912515":"path---graphile-build-context-object-d345ac465384564b9978.js","125892818282768":"path---graphile-build-default-plugins-89ffcefc7f0dd231e6b6.js","16210746157911":"path---graphile-build-graphile-build-1a8bd4a44af198ae6024.js","109947277077173":"path---graphile-build-getting-started-c617c40a8597aeac3ef1.js","57552969484094":"path---graphile-build-hooks-e0dad25cceff5876bcc9.js","276285638780302":"path---graphile-build-plugin-options-0304edfd69c6638fad3d.js","36474596372704":"path---graphile-build-omitting-plugins-0d645ab0048ab7dc1851.js","277477532944301":"path---graphile-build-schema-builder-eca85ec51c943e21220a.js","136546493962690":"path---graphile-build-plugins-5b015beab7d4d2b9bf28.js","141666846945901":"path---support-3d1d219a638e5f6326b3.js","235145966638131":"path---postgraphile-code-of-conduct-9cb48cda46385cb232bf.js","114781403929568":"path---postgraphile-community-chat-a61686ee319d0b2d333d.js","216163489569211":"path---postgraphile-community-plugins-7c2984f6e9c5b53c8c47.js","245194823331250":"path---postgraphile-connections-b595110bc7382118ab0d.js","226259727392765":"path---postgraphile-crud-mutations-ae093fe9f3c67f6eab65.js","99411096849217":"path---postgraphile-computed-columns-529954110d6df2338b44.js","209456356109321":"path---postgraphile-custom-mutations-f1bff4fde89c16512388.js","262226386268176":"path---postgraphile-custom-queries-6bc44d8ddfa994b1cd28.js","58450730530065":"path---postgraphile-debugging-873d7caebeab98e4050d.js","183024611244872":"path---postgraphile-default-role-079a76a7f8e5e1dde46f.js","46110498460401":"path---postgraphile-evaluating-085e3d2bba4a23e2a821.js","235675790195762":"path---postgraphile-examples-9e176cdc0aec655b85fc.js","29661158995595":"path---postgraphile-filtering-b9c720d028913a740d36.js","101463202308976":"path---postgraphile-function-restrictions-2d9f669592068b5497ec.js","231292683096477":"path---postgraphile-introduction-2f28cddc92d6994b62d1.js","33982096820675":"path---postgraphile-introspection-020566e5e2620db3d203.js","217512476184238":"path---postgraphile-jwt-guide-71fba0214b53e5aab862.js","245838197689590":"path---postgraphile-performance-c7e3ebd6918ce74f5b19.js","34112019379484":"path---postgraphile-plugins-eacd99baf68c0d35c83b.js","43306645800525":"path---postgraphile-postgresql-indexes-3337d190012a7d3090fc.js","20524195157075":"path---postgraphile-quick-start-guide-bf127442ba652f9c6f22.js","136696082986067":"path---postgraphile-relations-a3a4b44a34dacaebbe72.js","126695865748518":"path---postgraphile-reserved-keywords-8c879244dc4170a9c0e2.js","143935096069691":"path---postgraphile-security-6e0cc22714a3d87cf9c2.js","187294999324209":"path---postgraphile-requirements-50139fdc32b6e1766e96.js","109627700230002":"path---graphile-build-2db41d1ba8e5671d3014.js","76338124382236":"path---graphile-build-look-ahead-95dd9f38b9e6afeb3613.js","48764759135427":"path---postgraphile-8176f65eccf83167cc34.js","257659440118484":"path---postgraphile-procedures-8666267a4534c5fd002d.js","85182451526728":"path---postgraphile-pricing-72d7e46231e8d1d715be.js","163587040327238":"path---postgraphile-production-006602399ebdac031a80.js","247601703930759":"path---postgraphile-usage-e25612d731f2e6a0ddbd.js","156260474427399":"path---postgraphile-why-nullable-88b2d09e24e3e11c04d1.js","1465359564156":"path---postgraphile-extending-3533d6ec3e6c383dd103.js","27297302318019":"path---postgraphile-smart-comments-3aa4a7cbe4cc279279bb.js","3265662318058":"path---postgraphile-usage-cli-b5f79684c5ceba3f62cd.js","148070795768796":"path---postgraphile-usage-library-f526f48296d0aef2bfd5.js","272066437984048":"path---postgraphile-usage-schema-facc14d9f4f66d4c0eb5.js","112985368742066":"path---postgraphile-subscriptions-1104721f201effeeae25.js","87638492893048":"path---postgraphile-v-3-migration-f0e2ac812be3c2049980.js","57656932303775":"path---postgraphile-v-4-new-features-a0f39ca27eae44c260ff.js","17839233601159":"path---postgraphile-postgresql-schema-design-9f9a7d115f487ed57bc4.js","114276838955818":"component---src-layouts-index-js-53c26317295bc637138f.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-3596aa1ab404ed60101f.js","/app-eb265f0928a0eddb517e.js","/path---postgraphile-extending-3533d6ec3e6c383dd103.js","/component---src-templates-page-js-47ad1cc6d98dad93e89c.js","/component---src-layouts-index-js-53c26317295bc637138f.js"])/*]]>*/</script><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script></body></html>