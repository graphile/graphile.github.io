<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NNK4X8M');</script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"/><link rel="preload" href="/component---src-layouts-index-js-2f053db5a876c6cf7fe1.js" as="script"/><link rel="preload" href="/component---src-templates-page-js-6c5283e132445b79cf2a.js" as="script"/><link rel="preload" href="/path---postgraphile-v-3-migration-895a52e1290b1698166d.js" as="script"/><link rel="preload" href="/app-42d00392c0db179df328.js" as="script"/><link rel="preload" href="/commons-3596aa1ab404ed60101f.js" as="script"/><title data-react-helmet="true">PostGraphile | Migrating from PostGraphQL v3</title><meta data-react-helmet="true" name="description" content="Utilities to build powerful and performant GraphQL APIs"/><meta data-react-helmet="true" name="keywords" content="GraphQL, API, Graph, PostgreSQL, PostGraphile, PostGraphQL, Postgres-GraphQL, server, plugins, introspection, reflection"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><link rel="stylesheet" href="/styles.css?t=2018-10-03T09-16-59.890Z"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNK4X8M" height="0" width="0" style="display:none;visibility:hidden;"></iframe></noscript><div id="___gatsby"><div tabindex="-1" data-reactroot="" data-reactid="1" data-react-checksum="1786463795"><section class="banner-announcement" data-reactid="2"><a href="/news/postgraphile-version-4/" data-reactid="3"><!-- react-text: 4 -->ANNOUNCEMENT: PostGraphile v4 is released, <!-- /react-text --><u data-reactid="5">read more ¬ª</u></a></section><div class="template-page postgraphile" data-reactid="6"><!-- react-empty: 7 --><header class="header content absolute z-999 w-100" data-reactid="8"><nav class="navbar" data-reactid="9"><div class="container" data-reactid="10"><input type="checkbox" class="navbar-toggler input-reset" id="toggle" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" data-reactid="11"/><div class="nav-controls nested-list-reset " data-reactid="12"><div class="navbar-crosses" data-reactid="13"><span class="line line-1" data-reactid="14"> </span><span class="line line-2" data-reactid="15"> </span><span class="line line-3" data-reactid="16"> </span></div><ul class="navbar-nav flex w-100" data-reactid="17"><li class="navbar-item" data-reactid="18"><a class="nav-link " href="/" data-reactid="19"><span class="home-icon fas fa-home" data-reactid="20"></span><!-- react-text: 21 --> <!-- /react-text --><span class="home" data-reactid="22">Home</span></a></li><!-- react-empty: 23 --><!-- react-empty: 24 --><!-- react-empty: 25 --><li class="navbar-item" data-reactid="26"><a class="nav-link " href="/postgraphile/" data-reactid="27">Overview</a></li><li class="navbar-item" data-reactid="28"><a class="nav-link active" href="/postgraphile/introduction/" data-reactid="29">Documentation</a></li><li class="navbar-item" data-reactid="30"><a class="nav-link " href="/postgraphile/pricing/" data-reactid="31">Go Pro!</a></li><!-- react-empty: 32 --><!-- react-empty: 33 --><!-- react-empty: 34 --><!-- react-empty: 35 --><!-- react-empty: 36 --><li class="navbar-item ml-auto navbar-item-right" data-reactid="37"><span class="searchbox-container" data-reactid="38"><input id="search-box" placeholder="Search" data-reactid="39"/><span class="fas fa-search searchbox-search" data-reactid="40"></span></span></li><li class="navbar-item navbar-item-right" data-reactid="41"><a class="nav-link " href="/support/" data-reactid="42">Services</a></li><li class="navbar-item navbar-item-right hide-when-small" data-reactid="43"><a class="nav-link" href="https://graphql-training.com" title="GraphQL Training in London, Europe and Remote" data-reactid="44"><!-- react-text: 45 -->GraphQL Training<!-- /react-text --><!-- react-text: 46 --> <!-- /react-text --><span class="fas fa-external-link-square-alt" data-reactid="47"></span></a></li><li class="navbar-item navbar-item-right" data-reactid="48"><a class="nav-link nav-github-link flex items-center" href="https://github.com/graphile/postgraphile" data-reactid="49"><span class="f3 fab fa-github" data-reactid="50"></span><!-- react-text: 51 --> <!-- /react-text --><span class="github" data-reactid="52"><!-- react-text: 53 -->Github<!-- /react-text --><!-- react-text: 54 --> <!-- /react-text --><span class="fas fa-external-link-square-alt" data-reactid="55"></span></span></a></li></ul></div></div></nav></header><div class="page-content" data-reactid="56"><section data-reactid="57"><div class="container" data-reactid="58"><div class="row between-xs" data-reactid="59"><aside class="sidebar col-xs-12 col-md-3 last-xs mt3" data-reactid="60"><section data-reactid="61"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="62"><span data-reactid="63">Overview</span></h4><div class="nested-list-reset" data-reactid="64"><ul class="page-list nav flex-column mb5" data-reactid="65"><li class="f6 lh-copy pv1" data-reactid="66"><a class="nav-link " href="/postgraphile/introduction/" data-reactid="67"><span data-reactid="68">Introduction</span></a></li><li class="f6 lh-copy pv1" data-reactid="69"><a class="nav-link " href="/postgraphile/examples/" data-reactid="70"><span data-reactid="71"><strong>Example Gallery</strong></span></a></li><li class="f6 lh-copy pv1" data-reactid="72"><a class="nav-link " href="/postgraphile/usage/" data-reactid="73"><span data-reactid="74">Usage</span></a><ul class="page-list nav flex-column null" data-reactid="75"><li class="f6 lh-copy pv1" data-reactid="76"><a class="nav-link " href="/postgraphile/usage-cli/" data-reactid="77"><span data-reactid="78">CLI Usage</span></a></li><li class="f6 lh-copy pv1" data-reactid="79"><a class="nav-link " href="/postgraphile/usage-library/" data-reactid="80"><span data-reactid="81">Library Usage</span></a></li><li class="f6 lh-copy pv1" data-reactid="82"><a class="nav-link " href="/postgraphile/usage-schema/" data-reactid="83"><span data-reactid="84">Schema-only Usage</span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="85"><a class="nav-link " href="/postgraphile/performance/" data-reactid="86"><span data-reactid="87">Performance</span></a></li><li class="f6 lh-copy pv1" data-reactid="88"><a class="nav-link " href="/postgraphile/requirements/" data-reactid="89"><span data-reactid="90">Requirements</span></a></li></ul></div></section><section data-reactid="91"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="92"><span data-reactid="93">Operation</span></h4><div class="nested-list-reset" data-reactid="94"><ul class="page-list nav flex-column mb5" data-reactid="95"><li class="f6 lh-copy pv1" data-reactid="96"><a class="nav-link " href="/postgraphile/quick-start-guide/" data-reactid="97"><span data-reactid="98">Quick Start Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="99"><a class="nav-link " href="/postgraphile/namespaces/" data-reactid="100"><span data-reactid="101">Namespaces</span></a></li><li class="f6 lh-copy pv1" data-reactid="102"><a class="nav-link " href="/postgraphile/inflection/" data-reactid="103"><span data-reactid="104">Inflection</span></a></li><li class="f6 lh-copy pv1" data-reactid="105"><a class="nav-link " href="/postgraphile/tables/" data-reactid="106"><span data-reactid="107">Tables</span></a><ul class="page-list nav flex-column null" data-reactid="108"><li class="f6 lh-copy pv1" data-reactid="109"><a class="nav-link " href="/postgraphile/relations/" data-reactid="110"><span data-reactid="111">Relations</span></a></li><li class="f6 lh-copy pv1" data-reactid="112"><a class="nav-link " href="/postgraphile/connections/" data-reactid="113"><span data-reactid="114">Connections</span></a></li><li class="f6 lh-copy pv1" data-reactid="115"><a class="nav-link " href="/postgraphile/filtering/" data-reactid="116"><span data-reactid="117">Filtering</span></a></li><li class="f6 lh-copy pv1" data-reactid="118"><a class="nav-link " href="/postgraphile/crud-mutations/" data-reactid="119"><span data-reactid="120">CRUD Mutations</span></a></li><li class="f6 lh-copy pv1" data-reactid="121"><a class="nav-link " href="/postgraphile/node-id/" data-reactid="122"><span data-reactid="123">nodeId / id</span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="124"><a class="nav-link " href="/postgraphile/functions/" data-reactid="125"><span data-reactid="126">Functions</span></a><ul class="page-list nav flex-column null" data-reactid="127"><li class="f6 lh-copy pv1" data-reactid="128"><a class="nav-link " href="/postgraphile/computed-columns/" data-reactid="129"><span data-reactid="130">Computed Columns</span></a></li><li class="f6 lh-copy pv1" data-reactid="131"><a class="nav-link " href="/postgraphile/custom-queries/" data-reactid="132"><span data-reactid="133">Custom Queries</span></a></li><li class="f6 lh-copy pv1" data-reactid="134"><a class="nav-link " href="/postgraphile/custom-mutations/" data-reactid="135"><span data-reactid="136">Custom Mutations</span></a></li><li class="f6 lh-copy pv1" data-reactid="137"><a class="nav-link " href="/postgraphile/function-restrictions/" data-reactid="138"><span data-reactid="139">Function Restrictions</span></a></li><li class="f6 lh-copy pv1" data-reactid="140"><a class="nav-link " href="/postgraphile/function-gallery/" data-reactid="141"><span data-reactid="142"><strong>Function Gallery</strong></span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="143"><a class="nav-link " href="/postgraphile/postgresql-indexes/" data-reactid="144"><span data-reactid="145">PostgreSQL Indexes</span></a></li><li class="f6 lh-copy pv1" data-reactid="146"><a class="nav-link " href="/postgraphile/security/" data-reactid="147"><span data-reactid="148">Security</span></a></li><li class="f6 lh-copy pv1" data-reactid="149"><a class="nav-link " href="/postgraphile/subscriptions/" data-reactid="150"><span data-reactid="151">Subscriptions</span></a></li><li class="f6 lh-copy pv1" data-reactid="152"><a class="nav-link " href="/postgraphile/reserved-keywords/" data-reactid="153"><span data-reactid="154">Reserved Keywords</span></a></li><li class="f6 lh-copy pv1" data-reactid="155"><a class="nav-link " href="/postgraphile/debugging/" data-reactid="156"><span data-reactid="157">Debugging</span></a></li></ul></div></section><section data-reactid="158"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="159"><span data-reactid="160">Customising</span></h4><div class="nested-list-reset" data-reactid="161"><ul class="page-list nav flex-column mb5" data-reactid="162"><li class="f6 lh-copy pv1" data-reactid="163"><a class="nav-link " href="/postgraphile/smart-comments/" data-reactid="164"><span data-reactid="165">Smart Comments</span></a></li><li class="f6 lh-copy pv1" data-reactid="166"><a class="nav-link " href="/postgraphile/extending/" data-reactid="167"><span data-reactid="168">Schema Plugins</span></a><ul class="page-list nav flex-column null" data-reactid="169"><li class="f6 lh-copy pv1" data-reactid="170"><a class="nav-link " href="/postgraphile/make-extend-schema-plugin/" data-reactid="171"><span data-reactid="172">makeExtendSchemaPlugin</span></a></li><li class="f6 lh-copy pv1" data-reactid="173"><a class="nav-link " href="/postgraphile/make-add-inflectors-plugin/" data-reactid="174"><span data-reactid="175">makeAddInflectorsPlugin</span></a></li><li class="f6 lh-copy pv1" data-reactid="176"><a class="nav-link " href="/postgraphile/extending-raw/" data-reactid="177"><span data-reactid="178">Graphile Engine</span></a></li><li class="f6 lh-copy pv1" data-reactid="179"><a class="nav-link " href="/postgraphile/plugin-gallery/" data-reactid="180"><span data-reactid="181"><strong>Plugin Gallery</strong></span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="182"><a class="nav-link " href="/postgraphile/plugins/" data-reactid="183"><span data-reactid="184">Server Plugins</span></a></li></ul></div></section><section data-reactid="185"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="186"><span data-reactid="187">Guides</span></h4><div class="nested-list-reset" data-reactid="188"><ul class="page-list nav flex-column mb5" data-reactid="189"><li class="f6 lh-copy pv1" data-reactid="190"><a class="nav-link " href="/postgraphile/evaluating/" data-reactid="191"><span data-reactid="192">Evaluating for your Project</span></a></li><li class="f6 lh-copy pv1" data-reactid="193"><a class="nav-link " href="/postgraphile/postgresql-schema-design/" data-reactid="194"><span data-reactid="195">PostgreSQL Schema Design</span></a></li><li class="f6 lh-copy pv1" data-reactid="196"><a class="nav-link " href="/postgraphile/production/" data-reactid="197"><span data-reactid="198">Production Considerations</span></a></li><li class="f6 lh-copy pv1" data-reactid="199"><a class="nav-link " href="/postgraphile/jwt-guide/" data-reactid="200"><span data-reactid="201">PostGraphile JWT Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="202"><a class="nav-link " href="/postgraphile/default-role/" data-reactid="203"><span data-reactid="204">The Default Role</span></a></li><li class="f6 lh-copy pv1" data-reactid="205"><a class="nav-link " href="/postgraphile/v4-new-features/" data-reactid="206"><span data-reactid="207">v4 Feature Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="208"><a class="nav-link active" href="/postgraphile/v3-migration/" data-reactid="209"><span data-reactid="210">v3 ‚Üí v4 Migration Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="211"><a class="nav-link " href="/postgraphile/testing-jest/" data-reactid="212"><span data-reactid="213">Testing with Jest</span></a></li></ul></div></section><section data-reactid="214"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="215"><span data-reactid="216">Community</span></h4><div class="nested-list-reset" data-reactid="217"><ul class="page-list nav flex-column mb5" data-reactid="218"><li class="f6 lh-copy pv1" data-reactid="219"><a class="nav-link " href="/postgraphile/community-plugins/" data-reactid="220"><span data-reactid="221">Community Plugins</span></a></li><li class="f6 lh-copy pv1" data-reactid="222"><a class="nav-link " href="/postgraphile/community-chat/" data-reactid="223"><span data-reactid="224">Community Chat</span></a></li><li class="f6 lh-copy pv1" data-reactid="225"><a class="nav-link " href="/postgraphile/code-of-conduct/" data-reactid="226"><span data-reactid="227">Code of Conduct</span></a></li></ul></div></section><section data-reactid="228"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="229"><span data-reactid="230">FAQ</span></h4><div class="nested-list-reset" data-reactid="231"><ul class="page-list nav flex-column mb5" data-reactid="232"><li class="f6 lh-copy pv1" data-reactid="233"><a class="nav-link " href="/postgraphile/introspection/" data-reactid="234"><span data-reactid="235">Introspection?</span></a></li><li class="f6 lh-copy pv1" data-reactid="236"><a class="nav-link " href="/postgraphile/why-nullable/" data-reactid="237"><span data-reactid="238">Why is it nullable?</span></a></li></ul></div></section></aside><div class="col-xs-12 col-md-9 first-xs main-content" data-reactid="239"><div class="row" data-reactid="240"><div class="col-xs-12" style="width:100%;" data-reactid="241"><div class="edit-this-page" style="display:;" data-reactid="242"><a href="https://github.com/graphile/graphile.github.io/edit/develop/src/pages/postgraphile/v3-migration.md" data-reactid="243">üìù Suggest improvements to this page</a></div><div data-reactid="244"><h2 id="migrating-from-postgraphql-v3"><a href="#migrating-from-postgraphql-v3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Migrating from PostGraphQL v3</h2>
<p>Despite the fact that PostGraphile v4 has rewritten the <em>entire</em> GraphQL schema
generation from scratch it is still broadly compatible with version 3. This
document aims to outline solutions to issues you might face whilst upgrading.
If you face issues that you cannot solve, please do reach out!</p>
<h3 id="short-list-of-breaking-changes"><a href="#short-list-of-breaking-changes" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Short list of breaking changes</h3>
<p>These are things that can't be easily solved by just adding a command-line
switch or configuration parameter - if these are a problem for you then please
get in touch and we'll discuss how one might go about fixing them (please read
the below first though!)</p>
<ul>
<li>Per-function <code class="language-text">returns setof &lt;table&gt;</code> connection names have been removed in
favour of a shared connection with the tables themselves - only affects you
if you have referenced the type name in queries/fragments</li>
<li>What's nullable and what isn't has changed slightly - shouldn't cause an
issue in most cases (please read <a href="/postgraphile/why-nullable/">Why is it
nullable?</a> for an explanation of why each
thing is nullable)</li>
<li>JWTs now have an audience of 'postgraphile' rather than 'postgraphql', but
you can change this with the <code class="language-text">--jwt-verify-audience</code> option</li>
<li>If you have any tables ending with <code class="language-text">_input</code>, <code class="language-text">_patch</code>, <code class="language-text">Input</code> or <code class="language-text">Patch</code>
they will be renamed (see bottom of this article)</li>
</ul>
<h3 id="aside-project-financial-status"><a href="#aside-project-financial-status" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aside: project financial status</h3>
<p><strong>If your business uses PostGraphile, please invest in <a href="https://www.patreon.com/benjie">our
Patreon</a></strong> - you'll benefit from faster fixes,
more features, and better performance. If you need a more commercially
justifiable way of funding the project then please <a href="mailto:benjie@graphile.org?subject=PostGraphile">get in
touch</a>.</p>
<h3 id="deprecations"><a href="#deprecations" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deprecations</h3>
<h4 id="one-to-one-backward-relations"><a href="#one-to-one-backward-relations" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>One-to-one backward relations</h4>
<p>These are now supported, so the previous one-to-many approximation for them has
been deprecated. If you can do so we encourage you to remove the old API via
<code class="language-text">--legacy-relations=omit</code> (or <code class="language-text">legacyRelations: &#39;omit&#39;</code> in the library
version); however by default we include both relations. If for some reason you
don't want the deprecation and you don't want the new behaviour (why?! It's so
much better!) then you can enable the old behaviour only via
<code class="language-text">--legacy-relations=only</code>.</p>
<p>Example:</p>
<div class="gatsby-highlight">
      <pre class="language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> foo <span class="token punctuation">(</span>
  id <span class="token keyword">serial</span> <span class="token keyword">primary</span> <span class="token keyword">key</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> bar <span class="token punctuation">(</span>
  foo_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">references</span> foo<span class="token punctuation">,</span>
  name <span class="token keyword">text</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  fooById<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment"># Old interface - deprecated</span>
    <span class="token comment"># Note: this connection can only return at most one result so doesn't</span>
    <span class="token comment"># deserve a connection</span>
    barsByFooId <span class="token punctuation">{</span>
      edges <span class="token punctuation">{</span>
        node <span class="token punctuation">{</span>
          name
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># New interface - no more indirection!</span>
    barByFooId <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<h3 id="breakdown-of-issues-you-might-face"><a href="#breakdown-of-issues-you-might-face" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breakdown of issues you might face</h3>
<h4 id="new-minimum-requirements"><a href="#new-minimum-requirements" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New minimum requirements</h4>
<p><strong>Problem</strong>: the system fails to start (or even install) because the requirements
are not met.</p>
<p><strong>Solution</strong>: upgrade your software</p>
<ul>
<li>Node.js v8.6+ required</li>
<li>PostgreSQL 9.4+ required (v9.6+ recommended)</li>
<li>GraphQL v0.9+ required</li>
</ul>
<p><strong>Reasoning</strong>: Node.js v8 is the current active LTS, v6 will be leaving active LTS
status for maintenance mode in April 2018 (next month at time of writing), and
supporting 8.6+ as the base level gives us longevity whilst also allowing us to
leverage native support for some of the powerful features of ES2017 and ES2018.</p>
<h4 id="type-json-or-uuid-is-not-recognized"><a href="#type-json-or-uuid-is-not-recognized" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type 'Json' or 'Uuid' is not recognized</h4>
<p><strong>Problem</strong>: <code class="language-text">Json</code> and <code class="language-text">Uuid</code> have been renamed to <code class="language-text">JSON</code> and <code class="language-text">UUID</code> respectively</p>
<p><strong>Solution</strong>: either modify your queries, or if you cannot do that then use the
<code class="language-text">--legacy-json-uuid</code> command line flag (or <code class="language-text">legacyJsonUuid: true</code> library
option) to change back to the old naming.</p>
<p><strong>Reasoning</strong>: purely correctness/aesthetic. Sorry. üòÖ</p>
<h4 id="connection-orderby-is-now-an-array"><a href="#connection-orderby-is-now-an-array" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connection <code class="language-text">orderBy</code> is now an array</h4>
<p><strong>Problem</strong>: <code class="language-text">orderBy</code> in connection fields now allows an array of order
specifications, so you can order by multiple things (like in SQL). However
certain clients might have a problem with this?</p>
<p><strong>Solution</strong>: in most cases this should <em>not</em> cause an issue for existing queries -
according to <a href="http://facebook.github.io/graphql/October2016/#sec-Lists">3.1.7 in the GraphQL
specification</a>:</p>
<blockquote>
<p>If the value passed as an input to a list type is not a list and not the null
value, it should be coerced as though the input was a list of size one, where
the value passed is the only item in the list.</p>
</blockquote>
<p>So any spec-compliant client should <strong>not</strong> have an issue with this.</p>
<p><strong>Reasoning</strong>: people want to sort by multiple columns and since we could do it
with a non-breaking change (according to the above) we did!</p>
<h4 id="expected-uuid-but-received-string"><a href="#expected-uuid-but-received-string" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Expected 'UUID' but received 'String'</h4>
<p><strong>Problem</strong>: 'UUID' is enabled by default</p>
<p><strong>Solution</strong>: raise an issue and we can add a toggle to not enable it by default</p>
<p><strong>Reasoning</strong>: named types are helpful</p>
<h4 id="jwts-now-have-audience-postgraphile--issuer-postgraphile"><a href="#jwts-now-have-audience-postgraphile--issuer-postgraphile" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JWTs now have audience 'postgraphile' / issuer 'postgraphile'</h4>
<p><strong>Problem</strong>: we changed the audience with the rename of the library</p>
<p><strong>Solution</strong>: if you can't update your config you can make sure your token objects
returned in the DB have <code class="language-text">aud: &#39;postgraphql&#39;, iss: &#39;postgraphql&#39;</code> (solution
untested - if you used this please let <a href="https://twitter.com/benjie">me</a> know
whether it worked or not)</p>
<p><strong>Reasoning</strong>: we renamed the library, it'd be confusing for new users to reference
the old name.</p>
<h4 id="functions-now-use-table-connections-where-possible-again"><a href="#functions-now-use-table-connections-where-possible-again" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Functions now use table connections where possible (again!)</h4>
<p><strong>Problem</strong>: functions that return setof a table type now use the same connection
class as the tables themselves do (just like PostGraphQL v2 did)</p>
<p><strong>Solution</strong>: if this is a problem for you and you're unable to fix the queries,
please do get in touch!</p>
<p><strong>Reasoning</strong>: performing pagination against multiple sources of the same table
type is much more complex if the connection types differ.</p>
<p><strong>Potential future solution</strong>: have the connections implement a shared interface.</p>
<h4 id="issues-with-nullables"><a href="#issues-with-nullables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Issues with nullables</h4>
<p><strong>Problem</strong>: some things are nullable that weren't, some things aren't nullable that were.</p>
<p><strong>Solution</strong>: you can enable the <code class="language-text">--no-setof-functions-contain-nulls</code> CLI option
(or <code class="language-text">setofFunctionsContainNulls: false</code> library option) to reduce the nullables
in the generated schema.</p>
<p><strong>Reasoning</strong>:</p>
<p>Functions like this can exist:</p>
<div class="gatsby-highlight">
      <pre class="language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">function</span> c<span class="token punctuation">.</span>badly_behaved_function<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> setof c<span class="token punctuation">.</span>person <span class="token keyword">as</span> $$
<span class="token keyword">begin</span>
  <span class="token keyword">return</span> query <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> c<span class="token punctuation">.</span>person <span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">asc</span> <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">next</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> query <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> c<span class="token punctuation">.</span>person <span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
$$ <span class="token keyword">language</span> plpgsql stable<span class="token punctuation">;</span></code></pre>
      </div>
<p>This function returns an array of <code class="language-text">[{person}, null, {person}]</code> where <code class="language-text">{person}</code>
is a Person object. In PostGraphile because it is a <code class="language-text">setof</code> function we treat
it as a connection. As explained above, we now (like in version 2) use the same
connections for functions as for tables - as such these connections now have to
support that the entries within them are nullable.</p>
<p>If you don't like the nulls everywhere, I encourage you to use the <code class="language-text">-N</code> /
<code class="language-text">--no-setof-functions-contain-nulls</code> option mentioned above. Enabling this is a
non-breaking change, but disabling it <strong>is</strong> a breaking change - hence why it
is not the default behaviour.</p>
<h4 id="query-procedures-that-returns-setof-scalar-no-longer-have-pageinfo-nor-totalcount"><a href="#query-procedures-that-returns-setof-scalar-no-longer-have-pageinfo-nor-totalcount" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query procedures that <code class="language-text">returns setof &lt;scalar&gt;</code> no longer have <code class="language-text">pageInfo</code> nor <code class="language-text">totalCount</code></h4>
<p><strong>Problem</strong>: as heading.</p>
<p><strong>Solution</strong>: it's possibly to re-introduce support via a plugin - get in touch if
you need this</p>
<p><strong>Reasoning</strong>: I did not feel it was particularly necessary and I've only got
limited time to work on the project...</p>
<h4 id="watch-schema-has-changed"><a href="#watch-schema-has-changed" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Watch schema has changed</h4>
<p><em>Note that changes to the watch schema are NOT deemed to be breaking changes.</em></p>
<p><strong>Problem</strong>: watch schema has changed to fix issues with dropping objects</p>
<p><strong>Solution</strong>: most people shouldn't be affected by this (though they might want to
drop the old watch schema) because <code class="language-text">--watch</code> is only intended for development
use and the new schema should install itself just fine. But if you had to
manually install the old watch schema, you'll need to manually install the <a href="https://github.com/graphile/graphile-engine/blob/master/packages/graphile-build-pg/res/watch-fixtures.sql">new
one</a>
in the same way</p>
<p><strong>Reasoning</strong>: the old schema did not detect certain <code class="language-text">DROP</code> commands and so
adding tables, columns, functions, etc. to your schema was fine, but removing
them did not result in a refresh.</p>
<h3 id="other-changes-that-may-affect-you"><a href="#other-changes-that-may-affect-you" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other changes that may affect you</h3>
<p>These are things that I doubt affect many people (if any) but I want to raise
so you can check your own applications.</p>
<h4 id="introspection-query-has-changed"><a href="#introspection-query-has-changed" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introspection query has changed</h4>
<p>And will probably continue to change. Changes to the introspection query are
not deemed to be breaking changes. The introspection query is now
programatically generated so that we can support PG10 and PG11 features.</p>
<h4 id="field-descriptions-have-changed-a-little"><a href="#field-descriptions-have-changed-a-little" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Field descriptions have changed a little</h4>
<p>Field description changes are not deemed to be breaking changes.</p>
<h4 id="case-changing-library-has-changed"><a href="#case-changing-library-has-changed" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Case changing library has changed</h4>
<p>We replaced the library but this doesn't affect any of the tests. If this
causes you pain please submit an issue so we can add your fields/table names/etc to the tests
to ensure this doesn't happen again.</p>
<p>Workaround: you can change the inflection engine back to the old one with a
plugin - <a href="/postgraphile/make-add-inflectors-plugin/">see
<code class="language-text">makeAddInflectorsPlugin</code></a>.</p>
<h4 id="procedures-that-only-supported-orderby-natural-now-do-not-have-orderby-at-all"><a href="#procedures-that-only-supported-orderby-natural-now-do-not-have-orderby-at-all" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Procedures that only supported <code class="language-text">orderBy: NATURAL</code> now <strong>do not have <code class="language-text">orderBy</code> at all</strong>.</h4>
<p>Though technically a breaking change, I'm not deeming it as such because I
don't understand why you'd explicitly set the orderBy for a field that only has
one value and that value is enabled by default.</p>
<p>If this is a problem for you please get in touch and we can add support back
via a simple plugin.</p>
<h4 id="using-a-return-type-postgraphile-user-cant-access"><a href="#using-a-return-type-postgraphile-user-cant-access" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using a return type PostGraphile user can't access</h4>
<p><code class="language-text">security definer</code> mutations that return a type from a schema that the
requesting PostgreSQL user is not allowed to view may now result in <code class="language-text">permission denied for schema xxxx</code>.</p>
<p><strong>Solution</strong>: don't do that üòâ</p>
<h4 id="conflicting-tables-names---_input-_patch"><a href="#conflicting-tables-names---_input-_patch" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conflicting tables names - <code class="language-text">*_input</code>, <code class="language-text">*_patch</code></h4>
<p>Tables that end in <code class="language-text">_input</code> or <code class="language-text">_patch</code> such as <code class="language-text">foo_input</code> will no longer be
exported as <code class="language-text">FooInput</code> but as <code class="language-text">FooInputRecord</code> - this prevents collisions with
mutation types on tables that share the prefix (e.g. table <code class="language-text">foo</code>/<code class="language-text">foos</code>
requires <code class="language-text">FooInput</code> for its create mutation).</p>
<p>Even if they don't clash <em>right now</em> there's a risk that they will clash in
future; e.g. if you create the table <code class="language-text">foo_bar_input</code> then creating
<code class="language-text">FooBarInput</code> and <code class="language-text">FooBarInputInput</code> and <code class="language-text">FooBarInputPatch</code> is fine... But if
you later add the table <code class="language-text">foo_bar</code> then <code class="language-text">FooBarInput</code> will clash. So renaming
the tables up front means that whether or not you add that table later it'll
still be fine without breaking existing functionality.</p>
<p>You can rename tables directly, or if you prefer not to change your database
layout you can use <a href="/postgraphile/smart-comments/">smart comments</a> or write
a custom <a href="/postgraphile/inflection/">inflector</a>.</p>
<h4 id="very-large-numbers"><a href="#very-large-numbers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Very large numbers</h4>
<p>Large integers (over 4 bytes) are still referred to as <code class="language-text">BigInt</code>, large floats
(those beyond IEEE754) are now called <code class="language-text">BigFloat</code>. The specific boundaries in
which these new types kick in may have changed - particularly for
<code class="language-text">DECIMAL</code>/<code class="language-text">NUMERIC</code> types. <code class="language-text">DECIMAL</code>/<code class="language-text">NUMERIC</code> are likely to change in future
(so that smaller versions might be represented as int/float rather than
BigInt/BigFloat).</p></div></div><br data-reactid="245"/><br data-reactid="246"/><div class="col-xs-12 mt3 mb5" data-reactid="247"><div class="row between-xs" data-reactid="248"><div class="col-xs-6" data-reactid="249"><a class="" href="/postgraphile/v4-new-features/" data-reactid="250"><span class="fas fa-fw fa-arrow-left" data-reactid="251"></span><!-- react-text: 252 --> <!-- /react-text --><span data-reactid="253">v4 Feature Guide</span></a></div><div class="col-xs-6 tr" data-reactid="254"><a class="" href="/postgraphile/testing-jest/" data-reactid="255"><span data-reactid="256">Testing with Jest</span><!-- react-text: 257 --> <!-- /react-text --><span class="fas fa-fw fa-arrow-right" data-reactid="258"></span></a></div></div></div></div></div></div></div></section><section class="mailinglist" data-reactid="259"><div class="container" data-reactid="260"><div class="row" data-reactid="261"><div class="col-xs-12" data-reactid="262"><div class="hero-block" data-reactid="263"><h3 data-reactid="264"><!-- react-text: 265 -->Questions, comments or feedback?<!-- /react-text --><br data-reactid="266"/><!-- react-text: 267 -->Email<!-- /react-text --><!-- react-text: 268 --> <!-- /react-text --><a href="mailto:info@graphile.org?subject=Documentation%20question/comment/feedback:)" data-reactid="269">info@graphile.org</a></h3><form action="//graphile.us16.list-manage.com/subscribe/post?u=d103f710cf00a9273b55e8e9b&amp;id=c3a9eb5c4e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="270"><div id="mc_embed_signup_scroll" class="center hero-block" data-reactid="271"><p data-reactid="272">Keep up to date on Graphile and PostGraphile features/changes. Subscribe to our occasional announcements newsletter:</p><div class="mc-field-group form-inline justify-content-center" data-reactid="273"><div class="form-group" data-reactid="274"><div class="mb2" data-reactid="275"><label class="label--small" for="mce-EMAIL" data-reactid="276">Email address:</label></div><input type="email" autocapitalize="off" autocomplete="off" autocorrect="off" class="input-text mb0-ns mb1" id="mce-EMAIL" name="EMAIL" spellcheck="false" value="" data-reactid="277"/><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="278"><input type="text" name="b_d103f710cf00a9273b55e8e9b_c3a9eb5c4e" tabindex="-1" value="" data-reactid="279"/></div><input type="submit" class="button--solid" id="mc-embedded-subscribe" name="subscribe" value="Subscribe" data-reactid="280"/></div><div id="mce-responses" class="clear" data-reactid="281"><div class="response" id="mce-error-response" style="display:none;" data-reactid="282"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="283"></div></div></div></div></form></div></div></div></div></section></div><footer class="bg-white pv5 bt b--black f6 lh-copy" data-reactid="284"><div class="container" data-reactid="285"><div class="row" data-reactid="286"><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="287"><h6 data-reactid="288">PostGraphile</h6><ul data-reactid="289"><li data-reactid="290"><a href="/postgraphile/introduction/" data-reactid="291">Introduction</a></li><li data-reactid="292"><a href="/postgraphile/security/" data-reactid="293">Security</a></li><li data-reactid="294"><a href="/postgraphile/extending/" data-reactid="295">Extending</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="296"><h6 data-reactid="297">Graphile Engine</h6><ul data-reactid="298"><li data-reactid="299"><a href="/graphile-build/" data-reactid="300">About</a></li><li data-reactid="301"><a href="/graphile-build/getting-started/" data-reactid="302">Getting Started</a></li><li data-reactid="303"><a href="/graphile-build/plugins/" data-reactid="304">Plugins</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset" data-reactid="305"><h6 data-reactid="306">Resources</h6><ul data-reactid="307"><li data-reactid="308"><a href="/news/" data-reactid="309"><i class="fas fa-bullhorn" data-reactid="310"></i><!-- react-text: 311 --> News<!-- /react-text --></a></li><li data-reactid="312"><a href="https://github.com/graphile" data-reactid="313"><i class="fab fa-github" data-reactid="314"></i><!-- react-text: 315 --> GitHub<!-- /react-text --></a></li><li data-reactid="316"><a href="http://discord.gg/graphile" data-reactid="317"><i class="fab fa-discord" data-reactid="318"></i><!-- react-text: 319 --> Chat (discord)<!-- /react-text --></a></li><li data-reactid="320"><a href="https://twitter.com/benjie" data-reactid="321"><i class="fab fa-twitter" data-reactid="322"></i><!-- react-text: 323 --> Twitter<!-- /react-text --></a></li><li data-reactid="324"><a href="/news/press-kit/" data-reactid="325"><i class="fas fa-file-archive" data-reactid="326"></i><!-- react-text: 327 --> Logos/etc<!-- /react-text --></a></li></ul></div><div class="col-xs-12 col-md-offset-1 col-md-5" data-reactid="328"><h6 data-reactid="329">About</h6><!-- react-text: 330 -->PostGraphile and Graphile Build are Open Source Software, developed and maintained by <!-- /react-text --><a href="https://twitter.com/benjie" data-reactid="331">@Benjie</a><!-- react-text: 332 --> <!-- /react-text --><!-- react-text: 333 -->with the help of the community.<!-- /react-text --><br data-reactid="334"/><br data-reactid="335"/><!-- react-text: 336 -->You can support the projects via<!-- /react-text --><!-- react-text: 337 --> <!-- /react-text --><a href="https://www.patreon.com/benjie" target="_blank" rel="noopener noreferrer" data-reactid="338">Patreon</a><!-- react-text: 339 -->, by <!-- /react-text --><a href="/postgraphile/pricing/" data-reactid="340">going Pro</a><!-- react-text: 341 -->, or by paying for <!-- /react-text --><a href="/support/" data-reactid="342">Professional Services</a><!-- react-text: 343 -->. Your support is gratefully received üôè<!-- /react-text --><br data-reactid="344"/><br data-reactid="345"/><!-- react-text: 346 -->This site is copyright ¬© Benjie Gillam <!-- /react-text --><!-- react-text: 347 -->2018<!-- /react-text --><!-- react-text: 348 -->. Design and logos copyright ¬© Benjie Gillam and Jof Arnold<!-- /react-text --><!-- react-text: 349 --> <!-- /react-text --><!-- react-text: 350 -->2018<!-- /react-text --><!-- react-text: 351 -->.<!-- /react-text --><br data-reactid="352"/><br data-reactid="353"/><!-- react-text: 354 -->Corrections and contributions to this website are gratefully received via<!-- /react-text --><!-- react-text: 355 --> <!-- /react-text --><a href="https://github.com/graphile/graphile.github.io" data-reactid="356">its GitHub repository</a><!-- react-text: 357 -->.<!-- /react-text --><br data-reactid="358"/><br data-reactid="359"/><!-- react-text: 360 -->PostGraphile was <!-- /react-text --><a href="/history/" data-reactid="361">originally authored</a><!-- react-text: 362 --> as PostGraphQL by<!-- /react-text --><!-- react-text: 363 --> <!-- /react-text --><a href="https://twitter.com/calebmer" data-reactid="364">Caleb Meredith</a><!-- react-text: 365 -->.<!-- /react-text --></div></div></div></footer></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-42d00392c0db179df328.js","96961042003272":"component---src-templates-page-js-6c5283e132445b79cf2a.js","266772403791747":"component---src-templates-home-js-1e7d079c21a568292097.js","59784799166159":"component---src-templates-marketing-js-1174bcf6fcbc2195b628.js","60335399758886":"path----557518bd178906f8d58a.js","45788430371641":"path---history-0e3fc0b18be2e592ea42.js","142629428675168":"path---index-3bae5a346a6c565dbd0d.js","192423053311925":"path---graphile-build-pg-security-b8d3c87d6fb4127af47e.js","194808618595402":"path---graphile-build-pg-settings-ef833b969edcc43f4abf.js","128602041518144":"path---graphile-build-all-hooks-b83ac30846fc8e3eb13f.js","64023390553510":"path---graphile-build-build-object-79f22265cbda75a88a15.js","69504633912515":"path---graphile-build-context-object-c697236033cff024b6c5.js","125892818282768":"path---graphile-build-default-plugins-a8b160fc1672031eefce.js","16210746157911":"path---graphile-build-graphile-build-b33c3b572b311c505c36.js","109947277077173":"path---graphile-build-getting-started-e740a09b89138f7c9a1e.js","57552969484094":"path---graphile-build-hooks-bde9acc4bf8f700a54de.js","109627700230002":"path---graphile-build-f41a9655e0ee6494c60a.js","276285638780302":"path---graphile-build-plugin-options-a5497dea318bc1c4109e.js","136546493962690":"path---graphile-build-plugins-d80c42fbeb0bb2199a46.js","36474596372704":"path---graphile-build-omitting-plugins-cebb8e150f67bab98dd5.js","277477532944301":"path---graphile-build-schema-builder-86a9ab9b95305b11153c.js","208863975630277":"path---news-d5c233043ef1ff664a37.js","72313494074136":"path---news-press-kit-7494c7f58bfb66d01692.js","143510993521902":"path---news-postgraphile-version-4-3b612562f0696ab36b5f.js","141666846945901":"path---support-bf3737a42974bcc2fcc5.js","235145966638131":"path---postgraphile-code-of-conduct-4a9a37142dfa7f9d5156.js","114781403929568":"path---postgraphile-community-chat-e43b36fd0abf45e6fe3d.js","99411096849217":"path---postgraphile-computed-columns-2f79bd9d569d4019ff5b.js","216163489569211":"path---postgraphile-community-plugins-64e7864bbba66016f7a1.js","226259727392765":"path---postgraphile-crud-mutations-a4a908a8afa3b6ab6e19.js","209456356109321":"path---postgraphile-custom-mutations-35c081ec36eb9029fbe9.js","245194823331250":"path---postgraphile-connections-cc8970e5b9641cec3a07.js","262226386268176":"path---postgraphile-custom-queries-0cab49e6c274cc1dc901.js","58450730530065":"path---postgraphile-debugging-1fac6092911f7b61e36d.js","46110498460401":"path---postgraphile-evaluating-e2f727092e7c9b9aa8e2.js","183024611244872":"path---postgraphile-default-role-c6e39e5d22abacf1038f.js","235675790195762":"path---postgraphile-examples-e159f1e1c2eb44488374.js","101562502586227":"path---postgraphile-function-gallery-f3d313b34af1121f1ca7.js","29661158995595":"path---postgraphile-filtering-f9edb2eacc6556dca9dd.js","1465359564156":"path---postgraphile-extending-df6e76b2408c89da71d5.js","101463202308976":"path---postgraphile-function-restrictions-e2fe2f93b0ca5b1a186b.js","34445096275681":"path---postgraphile-inflection-4f80460729ecd87bd1e3.js","231292683096477":"path---postgraphile-introduction-dd2dfed24599be090df7.js","33982096820675":"path---postgraphile-introspection-3e1edaa3a316cb1cc51a.js","64254551156649":"path---postgraphile-make-add-inflectors-plugin-6cd195de940eb9bf0ce3.js","217512476184238":"path---postgraphile-jwt-guide-3f78f4bfb8f78d703e3c.js","206205697905610":"path---postgraphile-node-id-000c065f854100bc985d.js","245838197689590":"path---postgraphile-performance-c826a0f985b84c193d12.js","49645441935291":"path---postgraphile-namespaces-ee6d454e530e07a57255.js","193154730806080":"path---postgraphile-plugin-gallery-15a757eaf8dc39db7313.js","43306645800525":"path---postgraphile-postgresql-indexes-36ee3b62d8a4ed6b968a.js","34112019379484":"path---postgraphile-plugins-2e1159dedaae2232cc73.js","257659440118484":"path---postgraphile-procedures-3389fdd22fd669385646.js","20524195157075":"path---postgraphile-quick-start-guide-48fb942f9e08ae0535f1.js","136696082986067":"path---postgraphile-relations-9b46e4505ad7dcb48eac.js","126695865748518":"path---postgraphile-reserved-keywords-bf3eaaaaa3ff8e2d7aec.js","187294999324209":"path---postgraphile-requirements-a1b353fa58c8220285aa.js","143935096069691":"path---postgraphile-security-aaebb20199377620e512.js","244450434420656":"path---postgraphile-tables-e4925f53919d4e63f025.js","76338124382236":"path---graphile-build-look-ahead-66f713752812e33a8898.js","187503077063819":"path---postgraphile-extending-raw-b4b9c4eaf4662d1ead3e.js","202678300341359":"path---postgraphile-functions-81dcafdb30a3d4812215.js","30601655320255":"path---postgraphile-make-extend-schema-plugin-2c171741e68f74c33d4d.js","85182451526728":"path---postgraphile-pricing-56f8cb3229fe40a70b8b.js","163587040327238":"path---postgraphile-production-2a659e5caee32ad96498.js","27297302318019":"path---postgraphile-smart-comments-87c0782fa501ec42ba54.js","112985368742066":"path---postgraphile-subscriptions-68ffb1391fb45806c2e0.js","174583816914262":"path---postgraphile-testing-jest-58e30e98cc319a3be618.js","3265662318058":"path---postgraphile-usage-cli-32742a03f52539aa0ba3.js","148070795768796":"path---postgraphile-usage-library-c55e75d491e020c31613.js","247601703930759":"path---postgraphile-usage-20687444cbb0cb88cc7e.js","156260474427399":"path---postgraphile-why-nullable-99e6d86599e76ace4a5a.js","48764759135427":"path---postgraphile-42e2edfa7d90ded667fd.js","272066437984048":"path---postgraphile-usage-schema-9d94fe7d5d23e03ef7ae.js","87638492893048":"path---postgraphile-v-3-migration-895a52e1290b1698166d.js","57656932303775":"path---postgraphile-v-4-new-features-63c4714effc6508e8245.js","17839233601159":"path---postgraphile-postgresql-schema-design-0a69c7211547ddbd873a.js","114276838955818":"component---src-layouts-index-js-2f053db5a876c6cf7fe1.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-3596aa1ab404ed60101f.js","/app-42d00392c0db179df328.js","/path---postgraphile-v-3-migration-895a52e1290b1698166d.js","/component---src-templates-page-js-6c5283e132445b79cf2a.js","/component---src-layouts-index-js-2f053db5a876c6cf7fe1.js"])/*]]>*/</script><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script></body></html>